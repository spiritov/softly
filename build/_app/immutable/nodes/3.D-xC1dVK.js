import"../chunks/DsnmJJEf.js";import{B as q,u as Q,C as r,x as U,D as b,F as t,G as X,H as u,I as d,J as i,K as P,L as R}from"../chunks/ChvCK1NR.js";import{s as V}from"../chunks/DpCYWObJ.js";import{i as $}from"../chunks/Cvv2zzbZ.js";import{s as e,k as G,e as T,a as k,t as W,i as j,f as z,b as Y,c as Z}from"../chunks/nOQgMlTL.js";const ee=m=>{var f=ne();T(f,20,()=>({length:2}),j,(_,y)=>{var h=ve();t(_,h)}),i(f),W(3,f,()=>Z),t(m,f)},te=m=>{var f=pe(),_=d(f);{var y=c=>{var a=fe(),p=d(a);G(p,()=>e.stage,x=>{var v=de(),w=d(v,!0);i(v),b(()=>V(w,e.stage)),W(1,v,()=>z),t(x,v)}),i(a),t(c,a)};$(_,c=>{e.stage&&c(y)})}var h=u(_,2);{var O=c=>{var a=ue(),p=d(a);G(p,()=>e.map,x=>{var v=ce(),w=d(v,!0);i(v),b(()=>V(w,e.map)),W(1,v,()=>z),t(x,v)}),i(a),t(c,a)};$(h,c=>{e.map&&c(O)})}i(f),t(m,f)};var re=r('<img class="relative z-50 flex h-24 w-fit rounded-lg" alt="flag"/>'),ae=r("<span> </span>"),oe=r("<div></div>"),le=r('<div class="border-palewhite/50 size-8 border-4"></div>'),se=r('<span class="relative bottom-0.5 text-3xl opacity-50"> </span>'),ie=r('<div><div></div> <div id="spacer"></div> <!> <div class="flex flex-col gap-2 text-5xl"><!> <div><!> <!> <!></div></div></div>'),ve=r('<div class="flex basis-1/2 items-center justify-center border-white text-3xl first:border-r-[1px]">960x540px</div>'),ne=r('<div class="bg-palewhite/50 flex h-[540px] w-full"></div>'),de=r('<span class="relative left-2 flex w-full skew-x-[30deg] items-center justify-center py-3"> </span>'),fe=r('<div class="bg-fullblack/90 border-palewhite/50 relative right-8 min-w-64 skew-x-[-30deg] rounded-br-xl border-r-4 border-b-4 px-12"><!></div>'),ce=r('<span class="relative right-2 flex w-full skew-x-[-30deg] justify-center py-3"> </span>'),ue=r('<div class="bg-fullblack/90 border-palewhite/50 relative left-8 ml-auto min-w-64 skew-x-[30deg] rounded-bl-xl border-b-4 border-l-4 px-12"><!></div>'),pe=r('<div class="flex h-16 w-full justify-between text-3xl"><!> <!></div>'),ge=r('<div><div class="flex h-32 w-full"><!> <!></div> <!> <!></div>');function we(m,f){q(f,!0);const _=(n,o=U)=>{var S=ie(),L=d(S),B=u(L,4);{var J=l=>{var s=re();b(()=>Y(s,"src",`https://countryflagsapi.netlify.app/flag/${e[o()+"Flag"]??""}.svg`)),t(l,s)};$(B,l=>{e[o()+"Flag"]&&l(J)})}var N=u(B,2),A=d(N);G(A,()=>e[o()+"Name"],l=>{var s=ae(),g=d(s,!0);i(s),b(()=>V(g,e[o()+"Name"])),W(1,s,()=>z),t(l,s)});var C=u(A,2),D=d(C);T(D,17,()=>({length:e[o()+"Score"]}),j,(l,s)=>{var g=oe();b(()=>k(g,1,`starting:border-palewhite/50 starting:bg-overlay-orange/0 border-palewhite/50 bg-overlay-orange size-8 border-4 transition-colors duration-1000 ${e.useTeamColors==="true"?"":`hue-rotate-${e.hueRotate}`}`)),t(l,g)});var E=u(D,2);T(E,17,()=>({length:e.maxScore-e[o()+"Score"]}),j,(l,s)=>{var g=le();t(l,g)});var K=u(E,2);{var M=l=>{var s=se(),g=d(s);i(s),b(()=>V(g,`PR ${e[o()+"PR"]??""}`)),t(l,s)};$(K,l=>{(e.usePR==="true"||e.usePR)&&l(M)})}i(C),i(N),i(S),b(()=>{k(S,1,`relative flex basis-1/2 items-center gap-4 ${o()==="left"?"flex-row text-left":"flex-row-reverse text-right"}`),k(L,1,`absolute -z-10 h-full w-full ${o()==="left"?`bg-linear-to-r/oklch ${e.useTeamColors==="true"?P(y):P(O)}`:`bg-linear-to-l/oklch ${e.useTeamColors==="true"?P(h):P(c)}`}`),k(C,1,`flex gap-2 ${o()==="left"?"flex-row":"flex-row-reverse"}`)}),t(n,S)};let y=R(()=>`from-tf-blu ${e.useSinglePOV!=="true"?" to-fullblack/60":"to-fullblack/0"} to-75%`),h=R(()=>`from-tf-red ${e.useSinglePOV!=="true"?" to-fullblack/60":"to-fullblack/0"} to-75%`),O=R(()=>`from-overlay-orange/90 ${e.useSinglePOV!=="true"?" to-fullblack/60":"to-fullblack/0"} to-75% hue-rotate-${e.hueRotate}`),c=R(()=>`from-overlay-orange/90 ${e.useSinglePOV!=="true"?" to-fullblack/60":"to-fullblack/0"} to-75% hue-rotate-${e.hueRotate}`),a;window.addEventListener("storage",n=>{e[n.key]=n.newValue}),Q(()=>{if(e.useWebSocket==="true"&&e.useWebSocketToken!==""){const n=e.useWebSocketToken;a=new WebSocket(`wss://flyio-silent-sea-6505.fly.dev/?token=${n}`),a.onopen=o=>{console.log("[WebSocket] connection opened.")},a.onmessage=o=>{console.log("[WebSocket] received data..",o.data)}}return()=>{a&&(a.close(),console.log("[Websocket] closed previous connection."))}});var p=ge(),x=d(p),v=d(x);_(v,()=>"left");var w=u(v,2);_(w,()=>"right"),i(x);var F=u(x,2);{var H=n=>{ee(n)};$(F,n=>{e.useSinglePOV!=="true"&&n(H)})}var I=u(F,2);te(I),i(p),b(n=>k(p,1,`font-${n??""} flex h-screen w-screen flex-col overflow-hidden`),[()=>e.font.toLowerCase()]),t(m,p),X()}export{we as component};
